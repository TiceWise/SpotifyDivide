{% extends "layout.html" %}

{% block title %}
Step 2: Select Target
{% endblock %}

{% block main %}
<div class="col-lg-8 mx-auto">
    <H3 class="my-4">2: Select all possible target playlists you want to move the tracks to:</H3>
    <div class="list-group bg-dark">
        <button type="button" id="liked_songs"
            class="list-group-item list-group-item-action d-flex align-items-center text-light">
            <div class="image-parent"><img src="static/SpotifyLiked.png" class="img-fluid"></div>
            <div class="ms-3"> Liked songs </div>
        </button>
        {% for playlist in playlists %}
        <!-- https://codepen.io/cristinaconacel/pen/OBOjLg -->
        <button type="button" id={{ playlist['id'] }}
            class="list-group-item list-group-item-action d-flex align-items-center text-light">
            {% if playlist['images'] %}
            <div class="image-parent"><img src={{ playlist['images'][0]['url'] }} class="img-fluid"></div>
            {% else %}
            <div class="image-parent"><img src="static/EmptyPlaylist.png" class="img-fluid"></div>
            {% endif %}

            <div class="ms-3"> {{ playlist['name'] }} </div>
        </button>
        {% endfor %}
        <script>
            // https://stackoverflow.com/questions/32441186/jquery-post-to-flask-how-to-request-data
            // https://stackoverflow.com/questions/10291017/how-to-get-id-of-button-user-just-clicked

            $("button").click(function () {
                $.post("/select_source", { "playlist_id": this.id })
            });
        </script>
    </div>
</div>
{% endblock %}